<ng-container *ngIf="items.length > 0">
    <div class="table-responsive">
        <table class="table table-borderless">
            <thead class="border-0 py-2">
                <tr>
                    <th scope="col" class="ps-4">
                        <div class="p-2 text-uppercase">Product</div>
                    </th>
                    <th scope="col">
                        <div class="py-2 text-uppercase">Price</div>
                    </th>
                    <th scope="col">
                        <div class="py-2 text-uppercase">Quantity</div>
                    </th>
                    <th scope="col">
                        <div class="py-2 text-uppercase">Total</div>
                    </th>
                    <th *ngIf="isCart" scope="col" class="border-0">
                        <div class="py-2 text-uppercase">Remove</div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of items" class="border-0">
                    <th scope="row">
                        <div class="p-2 d-flex align-items-center">
                            <!-- Product Image with similar styling to product details -->
                            <div class="position-relative me-3" style="width: 80px; height: 80px; cursor: pointer;"
                                 (click)="openProductDetails(item, $event)">
                                <img [src]="getImageUrl(item.image)" 
                                     [alt]="item.name"
                                     class="img-fluid h-100 w-100 object-fit-cover bg-success-subtle">
                            </div>
                            <div class="d-flex flex-column">
                                <h6 class="mb-1">{{item.name}}</h6>
                                <span *ngIf="item.categoryName" 
                                      class="text-muted small">
                                    Category: {{item.categoryName}}
                                </span>
                            </div>
                        </div>
                    </th>
                    <td class="align-middle">
                        <strong>{{item.price | currency}}</strong>
                    </td>
                    <td class="align-middle">
                        <div class="d-flex align-items-center">
                            <i *ngIf="isCart" 
                               (click)="decrementItemQuantity(item)"  
                               class="fa fa-minus-circle text-warning me-2"
                               style="cursor: pointer; font-size: 1.5em;"></i>
                            <span class="font-weight-bold mx-2" style="font-size: 1.2em;">
                                {{item.quantity}}
                            </span>
                            <i *ngIf="isCart" 
                               (click)="incrementItemQuantity(item)" 
                               class="fa fa-plus-circle text-warning me-2"
                               style="cursor: pointer; font-size: 1.5em;"></i>
                        </div>
                    </td>
                    <td class="align-middle">
                        <strong>{{item.price * item.quantity | currency}}</strong>
                    </td>
                    <td class="align-middle text-center" *ngIf="isCart">
                        <a class="text-danger" (click)="removeCartItem(item)">
                            <i class="fa fa-trash" style="font-size: 1.5em; cursor: pointer;"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</ng-container>

<!-- Product Details Modal - Matching the product item component -->
<div class="modal fade show d-block bg-dark bg-opacity-50" 
     *ngIf="showDetails && selectedItem"
     [class.show]="showDetails">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ selectedItem.name }}</h5>
                <button type="button" class="btn-close" 
                        (click)="closeProductDetails()"></button>
            </div>
            <div class="modal-body">
                <img [src]="getImageUrl(selectedItem.image)" 
                     [alt]="selectedItem.name" 
                     class="img-fluid w-100 mb-3">
                <p>{{ selectedItem.description || 'No description available' }}</p>

                <!-- Quantity Selector -->
                <div class="d-flex align-items-center justify-content-center">
                    <i (click)="decrementItemQuantity(selectedItem)" 
                       class="fa fa-minus-circle text-warning me-3"
                       style="cursor: pointer; font-size: 2em;"></i>
                    <span class="font-weight-bold mx-3" style="font-size: 1.5em;">
                        {{ selectedItem.quantity }}
                    </span>
                    <i (click)="incrementItemQuantity(selectedItem)" 
                       class="fa fa-plus-circle text-warning me-3"
                       style="cursor: pointer; font-size: 2em;"></i>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex gap-3 mt-4">
                    <button class="btn btn-dark flex-grow-1 py-2" 
                            (click)="closeProductDetails()">
                        Continue Shopping
                    </button>
                    <button *ngIf="isCart" class="btn btn-danger flex-grow-1 py-2" 
                            (click)="removeCartItem(selectedItem); closeProductDetails()">
                        Remove Item
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>